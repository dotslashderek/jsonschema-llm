{
  "additionalProperties": false,
  "properties": {
    "result": {
      "$comment": "https://spec.openapis.org/arazzo/v1.0#step-object'",
      "additionalProperties": false,
      "description": "Describes a single workflow step which MAY be a call to an API operation (OpenAPI Operation Object or another Workflow Object)\n\nNote: While properties may be nullable, a valid output MUST include a non-null value for at least one of these properties: operationId, operationPath, workflowId",
      "properties": {
        "description": {
          "anyOf": [
            {
              "description": "A description of the step. CommonMark syntax MAY be used for rich text representation",
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "onFailure": {
          "anyOf": [
            {
              "description": "An array of failure action objects that specify what to do upon step failure. Constraints: items must be unique.",
              "items": {
                "anyOf": [
                  {
                    "description": "MUST be a valid JSON value serialized as a string. Structure: any. includes properties matching pattern(s) [^x-]. Do NOT output plain text — the value must parse with JSON.parse().",
                    "type": "string"
                  },
                  {
                    "$comment": "https://spec.openapis.org/arazzo/v1.0#reusable-object",
                    "additionalProperties": false,
                    "description": "A simple object to allow referencing of objects contained within the Components Object",
                    "properties": {
                      "reference": {
                        "description": "A runtime expression used to reference the desired object",
                        "type": "string"
                      },
                      "value": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "boolean"
                          },
                          {
                            "description": "MUST be a valid JSON object serialized as a string, e.g. \"{\\\"key\\\": \\\"value\\\"}\". Do NOT output plain text — the value must parse with JSON.parse().",
                            "type": "string"
                          },
                          {
                            "description": "MUST be a valid JSON array serialized as a string, e.g. \"[1, 2, 3]\". Do NOT output plain text — the value must parse with JSON.parse().",
                            "type": "string"
                          },
                          {
                            "type": "number"
                          },
                          {
                            "type": "null"
                          }
                        ],
                        "description": "Sets a value of the referenced parameter"
                      }
                    },
                    "required": [
                      "reference",
                      "value"
                    ],
                    "type": "object"
                  }
                ]
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ]
        },
        "onSuccess": {
          "anyOf": [
            {
              "description": "An array of success action objects that specify what to do upon step success. Constraints: items must be unique.",
              "items": {
                "anyOf": [
                  {
                    "description": "MUST be a valid JSON value serialized as a string. Structure: any. includes properties matching pattern(s) [^x-]. Do NOT output plain text — the value must parse with JSON.parse().",
                    "type": "string"
                  },
                  {
                    "$comment": "https://spec.openapis.org/arazzo/v1.0#reusable-object",
                    "additionalProperties": false,
                    "description": "A simple object to allow referencing of objects contained within the Components Object",
                    "properties": {
                      "reference": {
                        "description": "A runtime expression used to reference the desired object",
                        "type": "string"
                      },
                      "value": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "boolean"
                          },
                          {
                            "description": "MUST be a valid JSON object serialized as a string, e.g. \"{\\\"key\\\": \\\"value\\\"}\". Do NOT output plain text — the value must parse with JSON.parse().",
                            "type": "string"
                          },
                          {
                            "description": "MUST be a valid JSON array serialized as a string, e.g. \"[1, 2, 3]\". Do NOT output plain text — the value must parse with JSON.parse().",
                            "type": "string"
                          },
                          {
                            "type": "number"
                          },
                          {
                            "type": "null"
                          }
                        ],
                        "description": "Sets a value of the referenced parameter"
                      }
                    },
                    "required": [
                      "reference",
                      "value"
                    ],
                    "type": "object"
                  }
                ]
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ]
        },
        "operationId": {
          "anyOf": [
            {
              "description": "The name of an existing, resolvable operation, as defined with a unique operationId and existing within one of the sourceDescriptions",
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "operationPath": {
          "anyOf": [
            {
              "description": "A reference to a Source combined with a JSON Pointer to reference an operation",
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "outputs": {
          "anyOf": [
            {
              "description": "MUST be a valid JSON value serialized as a string. Structure: {}. includes properties matching pattern(s) [^[a-zA-Z0-9\\.\\-_]+$]. Do NOT output plain text — the value must parse with JSON.parse().",
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "parameters": {
          "anyOf": [
            {
              "description": "A list of parameters that MUST be passed to an operation or workflow as referenced by operationId, operationPath, or workflowId. Constraints: items must be unique.",
              "items": {
                "description": "MUST be a valid JSON object serialized as a string, e.g. \"{\\\"key\\\": \\\"value\\\"}\". Do NOT output plain text — the value must parse with JSON.parse().",
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ]
        },
        "requestBody": {
          "anyOf": [
            {
              "description": "MUST be a valid JSON value serialized as a string. Structure: any. includes properties matching pattern(s) [^x-]. Do NOT output plain text — the value must parse with JSON.parse().",
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        },
        "stepId": {
          "description": "Unique string to represent the step",
          "type": "string"
        },
        "successCriteria": {
          "anyOf": [
            {
              "description": "A list of assertions to determine the success of the step. Constraints: items must be unique; minimum 1 item(s).",
              "items": {
                "description": "MUST be a valid JSON value serialized as a string. Structure: any. includes properties matching pattern(s) [^x-]. Do NOT output plain text — the value must parse with JSON.parse().",
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ]
        },
        "workflowId": {
          "anyOf": [
            {
              "description": "Unique string to represent the workflow",
              "type": "string"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "description",
        "onFailure",
        "onSuccess",
        "operationId",
        "operationPath",
        "outputs",
        "parameters",
        "requestBody",
        "stepId",
        "successCriteria",
        "workflowId"
      ],
      "type": "object"
    }
  },
  "required": [
    "result"
  ],
  "type": "object"
}
