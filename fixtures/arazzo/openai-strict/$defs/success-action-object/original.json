{
  "$comment": "https://spec.openapis.org/arazzo/v1.0#success-action-object",
  "$defs": {
    "criterion-expression-type-object": {
      "$comment": "https://spec.openapis.org/arazzo/v1.0#criterion-expression-type-object",
      "$ref": "#/$defs/specification-extensions",
      "allOf": [
        {
          "if": {
            "properties": {
              "type": {
                "const": "jsonpath"
              }
            },
            "required": [
              "type"
            ]
          },
          "then": {
            "properties": {
              "version": {
                "const": "draft-goessner-dispatch-jsonpath-00"
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "type": {
                "const": "xpath"
              }
            },
            "required": [
              "type"
            ]
          },
          "then": {
            "properties": {
              "version": {
                "enum": [
                  "xpath-10",
                  "xpath-20",
                  "xpath-30"
                ]
              }
            }
          }
        }
      ],
      "description": "An object used to describe the type and version of an expression used within a Criterion Object",
      "properties": {
        "type": {
          "description": "The type of condition to be applied",
          "enum": [
            "jsonpath",
            "xpath"
          ]
        },
        "version": {
          "description": "A short hand string representing the version of the expression type",
          "type": "string"
        }
      },
      "required": [
        "type",
        "version"
      ],
      "type": "object"
    },
    "criterion-object": {
      "$comment": "https://spec.openapis.org/arazzo/v1.0#criterion-object",
      "$ref": "#/$defs/specification-extensions",
      "anyOf": [
        {
          "properties": {
            "type": {
              "default": "simple",
              "description": "The type of condition to be applied",
              "enum": [
                "simple",
                "regex",
                "jsonpath",
                "xpath"
              ]
            }
          },
          "type": "object"
        },
        {
          "$ref": "#/$defs/criterion-expression-type-object"
        }
      ],
      "dependentRequired": {
        "type": [
          "context"
        ]
      },
      "description": "An object used to specify the context, conditions, and condition types that can be used to prove or satisfy assertions specified in Step Object successCriteria, Success Action Object criteria, and Failure Action Object criteria",
      "properties": {
        "condition": {
          "description": "The condition to apply",
          "type": "string"
        },
        "context": {
          "description": "A runtime expression used to set the context for the condition to be applied on",
          "type": "string"
        }
      },
      "required": [
        "condition"
      ],
      "type": "object",
      "unevaluatedProperties": false
    },
    "specification-extensions": {
      "$comment": "https://spec.openapis.org/arazzo/v1.0#specification-extensions",
      "description": "While the Arazzo Specification tries to accommodate most use cases, additional data can be added to extend the specification at certain points",
      "patternProperties": {
        "^x-": true
      }
    },
    "stepId": {
      "$anchor": "stepId",
      "description": "Unique string to represent the step",
      "type": "string"
    },
    "workflowId": {
      "$anchor": "workflowId",
      "description": "Unique string to represent the workflow",
      "type": "string"
    }
  },
  "$ref": "#/$defs/specification-extensions",
  "allOf": [
    {
      "if": {
        "properties": {
          "type": {
            "const": "goto"
          }
        }
      },
      "then": {
        "oneOf": [
          {
            "required": [
              "workflowId"
            ]
          },
          {
            "required": [
              "stepId"
            ]
          }
        ]
      }
    }
  ],
  "description": "A single success action which describes an action to take upon success of a workflow step",
  "properties": {
    "criteria": {
      "description": "A list of assertions to determine if this action SHALL be executed",
      "items": {
        "$ref": "#/$defs/criterion-object"
      },
      "minItems": 1,
      "type": "array",
      "uniqueItems": true
    },
    "name": {
      "description": "The name of the success action",
      "type": "string"
    },
    "stepId": {
      "$ref": "#/$defs/stepId",
      "description": "The stepId to transfer to upon success of the step"
    },
    "type": {
      "description": "The type of action to take",
      "enum": [
        "end",
        "goto"
      ]
    },
    "workflowId": {
      "$ref": "#/$defs/workflowId",
      "description": "The workflowId referencing an existing workflow within the Arazzo description to transfer to upon success of the step"
    }
  },
  "required": [
    "name",
    "type"
  ],
  "type": "object",
  "unevaluatedProperties": false
}
