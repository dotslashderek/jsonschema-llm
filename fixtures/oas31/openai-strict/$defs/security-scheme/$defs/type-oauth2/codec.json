{
  "$schema": "https://jsonschema-llm.dev/codec/v1",
  "transforms": [
    {
      "type": "map_to_array",
      "path": "#/$defs/map-of-strings",
      "keyField": "key"
    },
    {
      "type": "nullable_optional",
      "path": "#/then/properties/flows/properties/authorizationCode",
      "originalRequired": false
    },
    {
      "type": "nullable_optional",
      "path": "#/then/properties/flows/properties/clientCredentials",
      "originalRequired": false
    },
    {
      "type": "nullable_optional",
      "path": "#/then/properties/flows/properties/implicit",
      "originalRequired": false
    },
    {
      "type": "nullable_optional",
      "path": "#/then/properties/flows/properties/password",
      "originalRequired": false
    },
    {
      "type": "nullable_optional",
      "path": "#/then/properties/flows/properties/authorizationCode/anyOf/0/properties/refreshUrl",
      "originalRequired": false
    },
    {
      "type": "nullable_optional",
      "path": "#/then/properties/flows/properties/clientCredentials/anyOf/0/properties/refreshUrl",
      "originalRequired": false
    },
    {
      "type": "nullable_optional",
      "path": "#/then/properties/flows/properties/implicit/anyOf/0/properties/refreshUrl",
      "originalRequired": false
    },
    {
      "type": "nullable_optional",
      "path": "#/then/properties/flows/properties/password/anyOf/0/properties/refreshUrl",
      "originalRequired": false
    },
    {
      "type": "root_object_wrapper",
      "path": "#",
      "wrapperKey": "result"
    },
    {
      "type": "json_string_parse",
      "path": "#/properties/result"
    }
  ],
  "droppedConstraints": [
    {
      "path": "#",
      "constraint": "if",
      "value": {
        "properties": {
          "type": {
            "const": "oauth2"
          }
        },
        "required": [
          "type"
        ]
      }
    },
    {
      "path": "#",
      "constraint": "then",
      "value": {
        "properties": {
          "flows": {
            "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
            "$defs": {
              "authorization-code": {
                "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
                "patternProperties": {
                  "^x-": true
                }
              },
              "client-credentials": {
                "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
                "patternProperties": {
                  "^x-": true
                }
              },
              "implicit": {
                "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
                "patternProperties": {
                  "^x-": true
                }
              },
              "password": {
                "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
                "patternProperties": {
                  "^x-": true
                }
              }
            },
            "additionalProperties": false,
            "patternProperties": {
              "^x-": true
            },
            "properties": {
              "authorizationCode": {
                "anyOf": [
                  {
                    "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
                    "additionalProperties": false,
                    "patternProperties": {
                      "^x-": true
                    },
                    "properties": {
                      "authorizationUrl": {
                        "format": "uri",
                        "type": "string"
                      },
                      "refreshUrl": {
                        "anyOf": [
                          {
                            "format": "uri",
                            "type": "string"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "scopes": {
                        "items": {
                          "additionalProperties": false,
                          "properties": {
                            "key": {
                              "type": "string"
                            },
                            "value": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "key",
                            "value"
                          ],
                          "type": "object"
                        },
                        "type": "array"
                      },
                      "tokenUrl": {
                        "format": "uri",
                        "type": "string"
                      }
                    },
                    "required": [
                      "authorizationUrl",
                      "refreshUrl",
                      "scopes",
                      "tokenUrl"
                    ],
                    "type": "object",
                    "unevaluatedProperties": false
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "clientCredentials": {
                "anyOf": [
                  {
                    "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
                    "additionalProperties": false,
                    "patternProperties": {
                      "^x-": true
                    },
                    "properties": {
                      "refreshUrl": {
                        "anyOf": [
                          {
                            "format": "uri",
                            "type": "string"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "scopes": {
                        "items": {
                          "additionalProperties": false,
                          "properties": {
                            "key": {
                              "type": "string"
                            },
                            "value": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "key",
                            "value"
                          ],
                          "type": "object"
                        },
                        "type": "array"
                      },
                      "tokenUrl": {
                        "format": "uri",
                        "type": "string"
                      }
                    },
                    "required": [
                      "refreshUrl",
                      "scopes",
                      "tokenUrl"
                    ],
                    "type": "object",
                    "unevaluatedProperties": false
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "implicit": {
                "anyOf": [
                  {
                    "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
                    "additionalProperties": false,
                    "patternProperties": {
                      "^x-": true
                    },
                    "properties": {
                      "authorizationUrl": {
                        "format": "uri",
                        "type": "string"
                      },
                      "refreshUrl": {
                        "anyOf": [
                          {
                            "format": "uri",
                            "type": "string"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "scopes": {
                        "items": {
                          "additionalProperties": false,
                          "properties": {
                            "key": {
                              "type": "string"
                            },
                            "value": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "key",
                            "value"
                          ],
                          "type": "object"
                        },
                        "type": "array"
                      }
                    },
                    "required": [
                      "authorizationUrl",
                      "refreshUrl",
                      "scopes"
                    ],
                    "type": "object",
                    "unevaluatedProperties": false
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "password": {
                "anyOf": [
                  {
                    "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
                    "additionalProperties": false,
                    "patternProperties": {
                      "^x-": true
                    },
                    "properties": {
                      "refreshUrl": {
                        "anyOf": [
                          {
                            "format": "uri",
                            "type": "string"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "scopes": {
                        "items": {
                          "additionalProperties": false,
                          "properties": {
                            "key": {
                              "type": "string"
                            },
                            "value": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "key",
                            "value"
                          ],
                          "type": "object"
                        },
                        "type": "array"
                      },
                      "tokenUrl": {
                        "format": "uri",
                        "type": "string"
                      }
                    },
                    "required": [
                      "refreshUrl",
                      "scopes",
                      "tokenUrl"
                    ],
                    "type": "object",
                    "unevaluatedProperties": false
                  },
                  {
                    "type": "null"
                  }
                ]
              }
            },
            "required": [
              "authorizationCode",
              "clientCredentials",
              "implicit",
              "password"
            ],
            "type": "object",
            "unevaluatedProperties": false
          }
        },
        "required": [
          "flows"
        ]
      }
    }
  ]
}
