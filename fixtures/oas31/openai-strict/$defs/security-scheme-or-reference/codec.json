{
  "$schema": "https://jsonschema-llm.dev/codec/v1",
  "transforms": [
    {
      "type": "map_to_array",
      "path": "#/$defs/map-of-strings",
      "keyField": "key"
    },
    {
      "type": "json_string_parse",
      "path": "#/if"
    },
    {
      "type": "nullable_optional",
      "path": "#/then/properties/$ref",
      "originalRequired": false
    },
    {
      "type": "nullable_optional",
      "path": "#/then/properties/description",
      "originalRequired": false
    },
    {
      "type": "nullable_optional",
      "path": "#/then/properties/summary",
      "originalRequired": false
    },
    {
      "type": "nullable_optional",
      "path": "#/else/properties/description",
      "originalRequired": false
    },
    {
      "type": "nullable_optional",
      "path": "#/else/$defs/type-oauth2/then/properties/flows/properties/authorizationCode",
      "originalRequired": false
    },
    {
      "type": "nullable_optional",
      "path": "#/else/$defs/type-oauth2/then/properties/flows/properties/clientCredentials",
      "originalRequired": false
    },
    {
      "type": "nullable_optional",
      "path": "#/else/$defs/type-oauth2/then/properties/flows/properties/implicit",
      "originalRequired": false
    },
    {
      "type": "nullable_optional",
      "path": "#/else/$defs/type-oauth2/then/properties/flows/properties/password",
      "originalRequired": false
    },
    {
      "type": "nullable_optional",
      "path": "#/else/$defs/type-oauth2/then/properties/flows/properties/authorizationCode/anyOf/0/properties/refreshUrl",
      "originalRequired": false
    },
    {
      "type": "nullable_optional",
      "path": "#/else/$defs/type-oauth2/then/properties/flows/properties/clientCredentials/anyOf/0/properties/refreshUrl",
      "originalRequired": false
    },
    {
      "type": "nullable_optional",
      "path": "#/else/$defs/type-oauth2/then/properties/flows/properties/implicit/anyOf/0/properties/refreshUrl",
      "originalRequired": false
    },
    {
      "type": "nullable_optional",
      "path": "#/else/$defs/type-oauth2/then/properties/flows/properties/password/anyOf/0/properties/refreshUrl",
      "originalRequired": false
    },
    {
      "type": "root_object_wrapper",
      "path": "#",
      "wrapperKey": "result"
    },
    {
      "type": "json_string_parse",
      "path": "#/properties/result"
    }
  ],
  "droppedConstraints": [
    {
      "path": "#/else",
      "constraint": "if",
      "value": {
        "properties": {
          "type": {
            "const": "apiKey"
          }
        },
        "required": [
          "type"
        ]
      }
    },
    {
      "path": "#/else",
      "constraint": "then",
      "value": {
        "properties": {
          "in": {
            "enum": [
              "query",
              "header",
              "cookie"
            ]
          },
          "name": {
            "type": "string"
          }
        },
        "required": [
          "name",
          "in"
        ]
      }
    },
    {
      "path": "#/else",
      "constraint": "if",
      "value": {
        "properties": {
          "type": {
            "const": "http"
          }
        },
        "required": [
          "type"
        ]
      }
    },
    {
      "path": "#/else",
      "constraint": "then",
      "value": {
        "properties": {
          "scheme": {
            "type": "string"
          }
        },
        "required": [
          "scheme"
        ]
      }
    },
    {
      "path": "#/else",
      "constraint": "if",
      "value": {
        "properties": {
          "scheme": {
            "pattern": "^[Bb][Ee][Aa][Rr][Ee][Rr]$",
            "type": "string"
          },
          "type": {
            "const": "http"
          }
        },
        "required": [
          "type",
          "scheme"
        ]
      }
    },
    {
      "path": "#/else",
      "constraint": "then",
      "value": {
        "properties": {
          "bearerFormat": {
            "type": "string"
          }
        }
      }
    },
    {
      "path": "#/else",
      "constraint": "if",
      "value": {
        "properties": {
          "type": {
            "const": "oauth2"
          }
        },
        "required": [
          "type"
        ]
      }
    },
    {
      "path": "#/else",
      "constraint": "then",
      "value": {
        "properties": {
          "flows": {
            "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
            "$defs": {
              "authorization-code": {
                "$ref": "#/$defs/specification-extensions",
                "properties": {
                  "authorizationUrl": {
                    "format": "uri",
                    "type": "string"
                  },
                  "refreshUrl": {
                    "format": "uri",
                    "type": "string"
                  },
                  "scopes": {
                    "$ref": "#/$defs/map-of-strings"
                  },
                  "tokenUrl": {
                    "format": "uri",
                    "type": "string"
                  }
                },
                "required": [
                  "authorizationUrl",
                  "tokenUrl",
                  "scopes"
                ],
                "type": "object",
                "unevaluatedProperties": false
              },
              "client-credentials": {
                "$ref": "#/$defs/specification-extensions",
                "properties": {
                  "refreshUrl": {
                    "format": "uri",
                    "type": "string"
                  },
                  "scopes": {
                    "$ref": "#/$defs/map-of-strings"
                  },
                  "tokenUrl": {
                    "format": "uri",
                    "type": "string"
                  }
                },
                "required": [
                  "tokenUrl",
                  "scopes"
                ],
                "type": "object",
                "unevaluatedProperties": false
              },
              "implicit": {
                "$ref": "#/$defs/specification-extensions",
                "properties": {
                  "authorizationUrl": {
                    "format": "uri",
                    "type": "string"
                  },
                  "refreshUrl": {
                    "format": "uri",
                    "type": "string"
                  },
                  "scopes": {
                    "$ref": "#/$defs/map-of-strings"
                  }
                },
                "required": [
                  "authorizationUrl",
                  "scopes"
                ],
                "type": "object",
                "unevaluatedProperties": false
              },
              "password": {
                "$ref": "#/$defs/specification-extensions",
                "properties": {
                  "refreshUrl": {
                    "format": "uri",
                    "type": "string"
                  },
                  "scopes": {
                    "$ref": "#/$defs/map-of-strings"
                  },
                  "tokenUrl": {
                    "format": "uri",
                    "type": "string"
                  }
                },
                "required": [
                  "tokenUrl",
                  "scopes"
                ],
                "type": "object",
                "unevaluatedProperties": false
              }
            },
            "patternProperties": {
              "^x-": true
            },
            "properties": {
              "authorizationCode": {
                "$ref": "#/$defs/authorization-code"
              },
              "clientCredentials": {
                "$ref": "#/$defs/client-credentials"
              },
              "implicit": {
                "$ref": "#/$defs/implicit"
              },
              "password": {
                "$ref": "#/$defs/password"
              }
            },
            "type": "object",
            "unevaluatedProperties": false
          }
        },
        "required": [
          "flows"
        ]
      }
    },
    {
      "path": "#/else",
      "constraint": "if",
      "value": {
        "properties": {
          "type": {
            "const": "openIdConnect"
          }
        },
        "required": [
          "type"
        ]
      }
    },
    {
      "path": "#/else",
      "constraint": "then",
      "value": {
        "properties": {
          "openIdConnectUrl": {
            "format": "uri",
            "type": "string"
          }
        },
        "required": [
          "openIdConnectUrl"
        ]
      }
    },
    {
      "path": "#",
      "constraint": "if",
      "value": {
        "description": "MUST be a valid JSON object serialized as a string, e.g. \"{\\\"key\\\": \\\"value\\\"}\". Do NOT output plain text â€” the value must parse with JSON.parse().",
        "type": "string"
      }
    },
    {
      "path": "#",
      "constraint": "then",
      "value": {
        "$comment": "https://spec.openapis.org/oas/v3.1.0#reference-object",
        "additionalProperties": false,
        "properties": {
          "$ref": {
            "anyOf": [
              {
                "format": "uri-reference",
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          },
          "summary": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "required": [
          "$ref",
          "description",
          "summary"
        ],
        "type": "object",
        "unevaluatedProperties": false
      }
    },
    {
      "path": "#",
      "constraint": "else",
      "value": {
        "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
        "$defs": {
          "type-apikey": {
            "if": {
              "properties": {
                "type": {
                  "const": "apiKey"
                }
              },
              "required": [
                "type"
              ]
            },
            "then": {
              "properties": {
                "in": {
                  "enum": [
                    "query",
                    "header",
                    "cookie"
                  ]
                },
                "name": {
                  "type": "string"
                }
              },
              "required": [
                "name",
                "in"
              ]
            }
          },
          "type-http": {
            "if": {
              "properties": {
                "type": {
                  "const": "http"
                }
              },
              "required": [
                "type"
              ]
            },
            "then": {
              "properties": {
                "scheme": {
                  "type": "string"
                }
              },
              "required": [
                "scheme"
              ]
            }
          },
          "type-http-bearer": {
            "if": {
              "properties": {
                "scheme": {
                  "pattern": "^[Bb][Ee][Aa][Rr][Ee][Rr]$",
                  "type": "string"
                },
                "type": {
                  "const": "http"
                }
              },
              "required": [
                "type",
                "scheme"
              ]
            },
            "then": {
              "properties": {
                "bearerFormat": {
                  "type": "string"
                }
              }
            }
          },
          "type-oauth2": {
            "if": {
              "properties": {
                "type": {
                  "const": "oauth2"
                }
              },
              "required": [
                "type"
              ]
            },
            "then": {
              "properties": {
                "flows": {
                  "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
                  "$defs": {
                    "authorization-code": {
                      "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
                      "patternProperties": {
                        "^x-": true
                      }
                    },
                    "client-credentials": {
                      "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
                      "patternProperties": {
                        "^x-": true
                      }
                    },
                    "implicit": {
                      "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
                      "patternProperties": {
                        "^x-": true
                      }
                    },
                    "password": {
                      "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
                      "patternProperties": {
                        "^x-": true
                      }
                    }
                  },
                  "additionalProperties": false,
                  "patternProperties": {
                    "^x-": true
                  },
                  "properties": {
                    "authorizationCode": {
                      "anyOf": [
                        {
                          "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
                          "additionalProperties": false,
                          "patternProperties": {
                            "^x-": true
                          },
                          "properties": {
                            "authorizationUrl": {
                              "format": "uri",
                              "type": "string"
                            },
                            "refreshUrl": {
                              "anyOf": [
                                {
                                  "format": "uri",
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "scopes": {
                              "items": {
                                "additionalProperties": false,
                                "properties": {
                                  "key": {
                                    "type": "string"
                                  },
                                  "value": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "key",
                                  "value"
                                ],
                                "type": "object"
                              },
                              "type": "array"
                            },
                            "tokenUrl": {
                              "format": "uri",
                              "type": "string"
                            }
                          },
                          "required": [
                            "authorizationUrl",
                            "refreshUrl",
                            "scopes",
                            "tokenUrl"
                          ],
                          "type": "object",
                          "unevaluatedProperties": false
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "clientCredentials": {
                      "anyOf": [
                        {
                          "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
                          "additionalProperties": false,
                          "patternProperties": {
                            "^x-": true
                          },
                          "properties": {
                            "refreshUrl": {
                              "anyOf": [
                                {
                                  "format": "uri",
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "scopes": {
                              "items": {
                                "additionalProperties": false,
                                "properties": {
                                  "key": {
                                    "type": "string"
                                  },
                                  "value": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "key",
                                  "value"
                                ],
                                "type": "object"
                              },
                              "type": "array"
                            },
                            "tokenUrl": {
                              "format": "uri",
                              "type": "string"
                            }
                          },
                          "required": [
                            "refreshUrl",
                            "scopes",
                            "tokenUrl"
                          ],
                          "type": "object",
                          "unevaluatedProperties": false
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "implicit": {
                      "anyOf": [
                        {
                          "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
                          "additionalProperties": false,
                          "patternProperties": {
                            "^x-": true
                          },
                          "properties": {
                            "authorizationUrl": {
                              "format": "uri",
                              "type": "string"
                            },
                            "refreshUrl": {
                              "anyOf": [
                                {
                                  "format": "uri",
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "scopes": {
                              "items": {
                                "additionalProperties": false,
                                "properties": {
                                  "key": {
                                    "type": "string"
                                  },
                                  "value": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "key",
                                  "value"
                                ],
                                "type": "object"
                              },
                              "type": "array"
                            }
                          },
                          "required": [
                            "authorizationUrl",
                            "refreshUrl",
                            "scopes"
                          ],
                          "type": "object",
                          "unevaluatedProperties": false
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "password": {
                      "anyOf": [
                        {
                          "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
                          "additionalProperties": false,
                          "patternProperties": {
                            "^x-": true
                          },
                          "properties": {
                            "refreshUrl": {
                              "anyOf": [
                                {
                                  "format": "uri",
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "scopes": {
                              "items": {
                                "additionalProperties": false,
                                "properties": {
                                  "key": {
                                    "type": "string"
                                  },
                                  "value": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "key",
                                  "value"
                                ],
                                "type": "object"
                              },
                              "type": "array"
                            },
                            "tokenUrl": {
                              "format": "uri",
                              "type": "string"
                            }
                          },
                          "required": [
                            "refreshUrl",
                            "scopes",
                            "tokenUrl"
                          ],
                          "type": "object",
                          "unevaluatedProperties": false
                        },
                        {
                          "type": "null"
                        }
                      ]
                    }
                  },
                  "required": [
                    "authorizationCode",
                    "clientCredentials",
                    "implicit",
                    "password"
                  ],
                  "type": "object",
                  "unevaluatedProperties": false
                }
              },
              "required": [
                "flows"
              ]
            }
          },
          "type-oidc": {
            "if": {
              "properties": {
                "type": {
                  "const": "openIdConnect"
                }
              },
              "required": [
                "type"
              ]
            },
            "then": {
              "properties": {
                "openIdConnectUrl": {
                  "format": "uri",
                  "type": "string"
                }
              },
              "required": [
                "openIdConnectUrl"
              ]
            }
          }
        },
        "additionalProperties": false,
        "patternProperties": {
          "^x-": true
        },
        "properties": {
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          },
          "type": {
            "enum": [
              "apiKey",
              "http",
              "mutualTLS",
              "oauth2",
              "openIdConnect"
            ]
          }
        },
        "required": [
          "description",
          "type"
        ],
        "type": "object",
        "unevaluatedProperties": false
      }
    }
  ]
}
